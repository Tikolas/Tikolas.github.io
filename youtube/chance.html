<!DOCTYPE html><html class="UTF" lang="ru-RU"><head><title>Шансы.</title><link rel="icon" href="/logo2.png" type="image/x-icon"></head><body><h2 id="general">Chance Calculator</h2><h3 id="one-more">When loot box of p% chance is performed n times, the chance to get one or more is</h3><p></p><form><div style="font-size:2em"><output name="op1">63.40</output>%<br/></div><h4 style="margin-top:0em">Количество попыток (n)</h4><input class="input-number" type="number" name="b" value="100" oninput="op1.value = simple_gacha(a.value, b.value);"><input class="input-slider" type="range" value="100" min="10" max="300" step="10" oninput="b.value=this.value;op1.value = simple_gacha(a.value, b.value);"><h4>Шанс выпадения (p)</h4><input class="input-number" type="number" name="a" value="1" oninput="op1.value = simple_gacha(a.value, b.value);"><div class="percent-right">%</div><div id="op1_btn" colspan="2"></div><script type="text/javascript">gen_button_simple_gacha();</script></div><div class="input-right"><table><tr><td align="center">hit</td><td align="center">chance</td></tr><tr><td align="center">0</td><td align="right" id="hit0">36.60%</td></tr><tr><td align="center">1</td><td align="right" id="hit1">36.97%</td></tr><tr><td align="center">2</td><td align="right" id="hit2">18.49%</td></tr><tr><td align="center">3</td><td align="right" id="hit3">6.10%</td></tr><tr><td align="center">4</td><td align="right" id="hit4">1.49%</td></tr><tr><td align="center">5</td><td align="right" id="hit5">0.29%</td></tr></table></div><div style="clear:both"></div><br/></form><br/><h3 id="greater-than">The chance to get m or more when loot box of p% chance is performed n times is</h3><p></p><form><div style="font-size:2em"><output name="op5">26.42</output>%<br/></div><div class="input-left"><h4>Required hits (m)</h4><div id="op5" colspan="2"></div><input class="input-number" type="number" name="m" value="2" oninput="pWithBinomialDistribution_str(op5, n.value, m.value, p.value);"><div id="op5_hits" colspan="2"></div><script type="text/javascript">gen_number_mnp();</script></div><div class="input-right"><h4>Количество попыток (n)</h4><input class="input-number" type="number" name="n" value="100" oninput="pWithBinomialDistribution_str(op5, n.value, m.value, p.value);"><input class="input-slider" type="range" value="100" min="50" max="900" step="50" oninput="n.value = this.value;pWithBinomialDistribution_str(op5, n.value, m.value, p.value);"></div><div style="clear:both"></div><h4>Шанс выпадения (p)</h4><div class="percent-wrapper"><div class="percent-left"><input class="input-number" type="number" name="p" value="1" oninput="pWithBinomialDistribution_str(op5, n.value, m.value, p.value);"></div><div class="percent-right">%</div></div><div id="op5_btn" colspan="2"></div><script type="text/javascript">gen_button_mnp();</script><br/></form><br/><h3 id="number-of-times">To get with n% chance, when the probability of hitting is p%, required trials are</h3><p></p><p></p><form><div style="font-size:2em"><output name="op3">459</output>times.<br/></div><div class="input-left"><h4>Шанс выпадения (p)</h4><div class="percent-wrapper"><div class="percent-left"><input class="input-number" type="number" name="p" value="1" oninput="op3.value = nGacha_str(p.value, n.value);"></div><div class="percent-right">%</div></div><div id="op3_btn" colspan="2"></div><script type="text/javascript">gen_button_np();</script></div><div class="input-right"><h4>Required probability(n)</h4><div class="percent-wrapper"><div class="percent-left"><input class="input-number" type="number" name="n" value="99" oninput="op3.value = nGacha_str(p.value, n.value);"></div><div class="percent-right">%</div></div><input class="input-slider" type="range" value="99" min="1" max="99" step="1" oninput="n.value = this.value;op3.value = nGacha_str(p.value, n.value);"></div><div style="clear:both"></div></form>
<script>function factorial(k){ret=1;for(l=parseInt(k);l>1;--l){ret=ret*l;}return ret;}function poisson(rambda,k){return Math.pow(2.7183,-rambda)*Math.pow(rambda,k)/factorial(k);}function poisson_prob(p,n,m){if(p*n*m<0){return 0;}ret=1.0;for(i=0;i<m;++i){ret-=poisson(p*n,i);}return ret;}function nGacha(p,n){return Math.ceil(Math.log(1.0-n)/Math.log(1.0-p));}function nGacha_str(p,n){var p=Number(p)/100.0;if(p<=0.0){return 'в€ћ';}if(p>=1.0){return '1';}var n=Number(n)/100.0;if(n>=1.0||n<=0.0){return 'в€ћ';}return nGacha(p,n);}function factorial(n){if(n<2){return 1;}ret=1.0;for(i=2;i<=n;++i){ret*=i;}return ret;}function combination(n,k){return factorial(n)/(factorial(n-k)*factorial(k));}function factorial_s(n,k){if(n<2){return 1;}ret=1.0;mul=n;for(i=k;i>0;--i){ret*=n;--n;}return ret;}function combination_opt(n,k){if(n*0.5>k){return factorial_s(n,k)/factorial(k);}return factorial_s(n,n-k)/factorial(n-k);}function binomialDistribution(n,k,p,q){return combination_opt(n,k)*Math.pow(p,k)*Math.pow(q,n-k);}function pWithBinomialDistribution(n,k,p,q){ret=1.0;for(j=0;j<k;++j){ret-=binomialDistribution(n,j,p,q);}return ret;}function pWithBinomialDistribution_str(out,n,m,p){var n=Number(n);var m=Number(m);var p=Number(p)/100.0;var q=1.0-p;out.value=chance_to_string(100*pWithBinomialDistribution(n,m,p,q));}function chance_to_string(p){return (p>=99.99)?'99.99':p.toFixed(2);}function simple_gacha(p_str,trials_str){var p=Number(p_str)/100.0;var numTrials=Number(trials_str);var ans_n=100*(1-(Math.pow(1.0-p,numTrials)));set_hit_table(p,numTrials);return chance_to_string(ans_n);}function set_html_value(id_str,value){var target=document.getElementById(id_str);target.innerHTML=value;}function set_hit_table(p,numTrials){for(var i=0;i<6;++i){set_html_value('hit'+i,chance_to_string(100*binomialDistribution(numTrials,i,p,1.0-p))+'%');}for(var i=numTrials+1;i<6;++i){set_html_value('hit'+i,0+'%');}}function gen_button(id_str,gen_btn){let table=['0.1','0.2','0.25','0.3','0.3333','0.4','0.5','0.6','0.7','0.75','0.8','0.9','1','1.2','1.6666','2','3','4','5','6','7','8','9','10'];let target=document.getElementById(id_str);target.innerHTML="";table.forEach(function (value){target.innerHTML+=gen_btn(value);});}function gen_number(id_str,gen_btn){let target=document.getElementById(id_str);target.innerHTML="";[...Array(10).keys()].forEach(function (value){target.innerHTML+=gen_btn((value+1)+'');});}function output(t,text){document.getElementById("output_t").innerHTML="ж¤ње®љзµ±иЁ€й‡ЏT="+t;document.getElementById("output").innerHTML=text;}function test_chi_squared(){let form=document.getElementById("chi_squared");const num_sample=get_num_sample(form);let samples=[];for(let i=0;i<num_sample;++i){const val=document.getElementById("box"+i).value;if(val===""){output("","");return ;}samples.push(Number(val));}let sum=0;for(let i=0;i<num_sample;++i){sum+=samples[i];}const np=sum/num_sample;let t=0;for(let i=0;i<num_sample;++i){const s=samples[i];t+=(s-np)*(s-np)/np;}let out_text='жњ‰ж„Џе·®гЃЊгЃ‚г‚‹гЃЁгЃЇиЁЂгЃ€гЃЄгЃ„пј€гЃ‚г‚‹гЃ‹г‚‚гЃ—г‚ЊгЃЄгЃ—гЂЃгЃЄгЃ„гЃ‹г‚‚гЃ—г‚ЊгЃЄгЃ„пј‰';if(t>get_chi_squared_table(form)[num_sample-1]){out_text='жњ‰ж„Џе·®гЃ‚г‚Љ';}output(t.toFixed(2),out_text);}
</script>
<style>body{text-align:center}</style>
</body>