<html>
<head>
<title>Case</title>
</head>
<body>
<script src="/jss/case.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@3.3.2/dist/chart.min.js"></script>
<style>body{text-align: center;}.g{color: green;font-weight: bold;}.r{color:red;font-weight: bold;}
textarea{width: 270px;height: 100px;}.charti{width: 300px;height: 200px;display: inline-block;}</style>

<div>Название : Сегодня : Вчера : Позавчера</div><br>
<div id="casecs"></div>
<div>
<h3>У меня есть</h3>
<textarea id="thz"onkeyup="countcase()">18,1,6|200,10,7</textarea>
<h3>Итог</h3>
<textarea id="ksj"></textarea>
</div>
<script>
cases = ["Prisma Case","Prisma 2 Case","Revolver Case","Danger Zone Case","Chroma 3 Case","Horizon Case","CS20 Case","Spectrum 2 Case","Shadow Case","Falchion Case","Chroma 2 Case","Clutch Case","Gamma Case","Gamma 2 Case","Operation Wildfire Case","Spectrum Case","Fracture Case","Operation Vanguard Weapon Case","Operation Broken Fang Case","Chroma Case","Operation Phoenix Weapon Case","Shattered Web Case","Glove Case","Operation Breakout Weapon Case","Huntsman Weapon Case","eSports 2014 Summer Case","CS:GO Weapon Case 3","eSports 2013 Winter Case","Winter Offensive Weapon Case","CS:GO Weapon Case 2","Operation Hydra Case","eSports 2013 Case","Operation Bravo Case","CS:GO Weapon Case","Snakebite Case"];
sum=0;
zee="";
function show(){
for(i=0;i<35;i++){
dey=eval((cosz[list[i]]-cosz2[list[i]]).toFixed(2));
dey2=eval((cosz[list[i]]-cosz3[list[i]]).toFixed(2));
if(dey>0){dey=cosz2[list[i]]+"<sup class='g'>+"+dey+"</sup>";}else{dey=cosz2[list[i]]+"<sub class='r'>"+dey+"</sub>";}
if(dey2>0){dey2=cosz3[list[i]]+"<sup class='g'>+"+dey2+"</sup>";}else{dey2=cosz3[list[i]]+"<sub class='r'>"+dey2+"</sub>";}
document.getElementById("casecs").innerHTML += "<div onclick='ads(this.dataset.list);'data-value='"+cosz[list[i]]+"'data-list='"+list[i]+"'>"+ cases[list[i]] +" : "+cosz[list[i]]+" : "+dey+" : "+dey2+"</div><br><div class='charti'><canvas id='abb"+list[i]+"'></canvas></div><br>";
}
}
function countcase(){
ihave = document.getElementById("thz").value;
document.getElementById("ksj").innerHTML="";
//ihave="18,1,6|200,10,7";
summa=0;
cot=ihave.split("|");
for(i=0;i<cot[0].split(",").length;i++){
meh=eval((cosz[eval(cot[0].split(",")[i])]*eval(cot[1].split(",")[i])).toFixed(2));
summa=summa+meh;
document.getElementById("ksj").innerHTML+=meh+"\n";
}
document.getElementById("ksj").innerHTML+="\nИтого:"+summa.toFixed(2)+"\nКомиссия: "+eval((summa-(13/100)*summa).toFixed(2));
}
function ads(item){
ihave = document.getElementById("thz").value;
cot=ihave.split("|");
if(cot[0].includes(item)==false){
cot[0]=cot[0]+","+item;
cot[1]=cot[1]+",1";
document.getElementById("thz").innerHTML=cot[0]+"|"+cot[1];
}
}
function st(){
for(i=0;i<35;i++){
let w = cosz[i];
let a = cosz2[i];let cas= cases[i];
let s = cosz3[i];let el = "abb"+i;
chartjss(w,a,s,el,cas);}
}
function chartjss(w,a,s,el,cas){
c = document.getElementById(el);
ctx = c.getContext('2d');
myChart = new Chart(ctx, {
type: 'line',
data: {
labels: ["Сегодня","Вчера","позаВчера"],
datasets: [{
label: cas,
data: [w,a,s],
fill: 'origin',
backgroundColor: [
'rgba(255, 99, 132, 0.2)'
],
borderColor: [
'rgba(255, 99, 132, 1)',
],
borderWidth: 5
        }]
    },
    options: {
    responsive: true,
}
});
}

setTimeout(show,100);
setTimeout(st,100);
</script>
</body>
</html>
